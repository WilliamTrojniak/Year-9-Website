<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<title>Stage 4 JSON Activity</title>
	<style type="text/css">
		#div1 {
			background: blue;
			height: 50px;
			width: 0px;
			border-radius: 10px;
		}
		#div2 {
			background: red;
			height: 50px;
			width: 0px;
			border-radius: 10px;
		}
		#div3 {
			background: green;
			height: 50px;
			width: 0px;
			border-radius: 10px;
		}
		p {
			font-size: 20px;
			line-height: 50px;
			margin-left: 30px;
		}
	</style>
</head>
<body>

    <h1>HIV Infection Rates Compared Proportionally By Country<h1>
    <div id = "div1"><p id = "p1"></p>
    </div>
    <div id = "div2"><p id = "p2"></p>
    </div>
    <div id = "div3"><p id = "p3"></p>
    </div>




	<script type="text/javascript">
		var myData = "";
   		var staticUrl = 'https://raw.githubusercontent.com/WilliamTrojniak/williamtrojniak.github.io/master/Activity%202%20Work/data/data.json'; 

		$.getJSON(staticUrl, function(data) {
			iw = window.innerWidth - 100;
			

            country1Data = data.fact[1].Value;
            val1 = country1Data.substring(0, country1Data.indexOf("["));
            val1 = val1.replace(" ", "");
            val1 = parseInt(val1)
            country2Data = data.fact[2].Value;
            val2 = country2Data.substring(0, country2Data.indexOf("["));
            val2 = val2.replace(" ", "");
            val2 = parseInt(val2)
            country4Data = data.fact[4].Value;
            val4 = country4Data.substring(0, country4Data.indexOf("["));
            val4 = val4.replace(" ", "");
            val4 = parseInt(val4)


            largest = Math.max(val1, val2, val4);

			val1s = (val1/largest) * iw;
			val2s = (val2/largest) * iw;
			val4s = (val4/largest) * iw;


			country1Name = data.fact[1].dims.COUNTRY;
			country2Name = data.fact[2].dims.COUNTRY;
			country4Name = data.fact[4].dims.COUNTRY;
			


            document.getElementById("div1").style.width = val1s+"px";
			document.getElementById("p1").innerHTML = "<pre>"+country1Name + " : "+val1+"</pre>"
			document.getElementById("div2").style.width = val2s+"px";
			document.getElementById("p2").innerHTML = "<pre>"+ country2Name + " : "+val2+"</pre>"
			document.getElementById("div3").style.width = val4s+"px";
			document.getElementById("p3").innerHTML = "<pre>"+ country4Name + " : "+val4+"</pre>"



    	});
    	
	</script>
</body>
</html>